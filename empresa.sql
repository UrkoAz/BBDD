DROP DATABASE IF EXISTS EMPRESA;
CREATE DATABASE EMPRESA;

USE EMPRESA;

CREATE TABLE ONG(
    ID_ONG INT NOT NULL,
    NOMBRE_ONG VARCHAR(30) NOT NULL,
    TLF_ONG INT(9) NOT NULL,
    DIR_ONG VARCHAR(50) NOT NULL,
    ID_EMPRESA INT NOT NULL
);

CREATE TABLE EMPRESA(
    ID_EMPRESA INT NOT NULL,
    NOMBRE_EMPRE TEXT NOT NULL,
    DIR_EMPR VARCHAR(50) NOT NULL,
    TLF_EMPR INT(9) NOT NULL
);

CREATE TABLE DEPARTAMENTO(
    ID_DEP INT NOT NULL,
    NOMBRE_DEP TEXT NOT NULL,
    NUM_DEP INT NOT NULL,
    NUM_TRAB INT NOT NULL,
    ID_EMPRESA INT NOT NULL
);

CREATE TABLE EMPLEADOS(
    ID_EMPLEADOS INT NOT NULL,
    NOMBRE_EMPL TEXT NOT NULL,
    TLF_EMPL INT(9) NOT NULL,
    SALARIO INT(4) NOT NULL,
    DIR_EMPL VARCHAR(50) NOT NULL,
    SEXO TEXT NOT NULL,
    APELLIDO1 TEXT NOT NULL,
    APELLIDO2 TEXT NOT NULL,
    FECHA_NAC_EMPL DATE NOT NULL,
    ID_DEP INT NOT NULL
);

CREATE TABLE REPARA(
    FECHA_HORA DATETIME NOT NULL,
    ID_EMPLEADOS INT NOT NULL,
    ID_DISP INT NOT NULL
);

CREATE TABLE DISPOSITIVOS(
    ID_DISP INT NOT NULL,
    FECHALLEGADA DATE NOT NULL,
    MARCA_DISP TEXT NOT NULL
);

CREATE TABLE ORDENADOR(
    ID_ORDENADOR INT NOT NULL,
    DESCRIPCION_ORD VARCHAR(70) NOT NULL,
    MARCA_ORD TEXT NOT NULL,
    TIPO_ORD TEXT NOT NULL,
    ID_DISP INT NOT NULL
);

CREATE TABLE MOVIL(
    ID_MOVIL INT NOT NULL,
    DESCRIPCION_MOV VARCHAR(50) NOT NULL,
    MARCA_MOV TEXT NOT NULL,
    TIPO_MOV TEXT NOT NULL,
    ID_DISP INT NOT NULL
);

CREATE TABLE ACCESORIOS(
    ID_ACCESORIOS INT NOT NULL,
    DESCRIPCION_ACC VARCHAR(50) NOT NULL,
    MARCA_ACC TEXT NOT NULL,
    TIPO_ACC TEXT NOT NULL,
    ID_DISP INT NOT NULL
);

ALTER TABLE ONG ADD CONSTRAINT pk_ong PRIMARY KEY(ID_ONG);
ALTER TABLE EMPRESA ADD CONSTRAINT pk_empresa PRIMARY KEY(ID_EMPRESA);
ALTER TABLE DEPARTAMENTO ADD CONSTRAINT pk_departamento PRIMARY KEY(ID_DEP);
ALTER TABLE EMPLEADOS ADD CONSTRAINT pk_empleados PRIMARY KEY(ID_EMPLEADOS);
ALTER TABLE REPARA ADD CONSTRAINT pk_repara PRIMARY KEY(ID_EMPLEADOS, ID_DISP);
ALTER TABLE DISPOSITIVOS ADD CONSTRAINT pk_dispositivos PRIMARY KEY(ID_DISP);
ALTER TABLE ORDENADOR ADD CONSTRAINT pk_ordenador PRIMARY KEY(ID_ORDENADOR);
ALTER TABLE MOVIL ADD CONSTRAINT pk_movil PRIMARY KEY(ID_MOVIL);
ALTER TABLE ACCESORIOS ADD CONSTRAINT pk_accesorios PRIMARY KEY(ID_ACCESORIOS);

ALTER TABLE ONG ADD CONSTRAINT fk_ong FOREIGN KEY(ID_EMPRESA) REFERENCES EMPRESA(ID_EMPRESA);
ALTER TABLE DEPARTAMENTO ADD CONSTRAINT fk_departamento FOREIGN KEY(ID_EMPRESA) REFERENCES EMPRESA(ID_EMPRESA);
ALTER TABLE EMPLEADOS ADD CONSTRAINT fk_empleados FOREIGN KEY(ID_DEP) REFERENCES DEPARTAMENTO(ID_DEP);
ALTER TABLE REPARA ADD CONSTRAINT fk_repara_empleados FOREIGN KEY(ID_EMPLEADOS) REFERENCES EMPLEADOS(ID_EMPLEADOS);
ALTER TABLE REPARA ADD CONSTRAINT fk_repara_disp FOREIGN KEY(ID_DISP) REFERENCES DISPOSITIVOS(ID_DISP);
ALTER TABLE ORDENADOR ADD CONSTRAINT fk_ordenador FOREIGN KEY(ID_DISP) REFERENCES DISPOSITIVOS(ID_DISP);
ALTER TABLE MOVIL ADD CONSTRAINT fk_movil FOREIGN KEY(ID_DISP) REFERENCES DISPOSITIVOS(ID_DISP);
ALTER TABLE ACCESORIOS ADD CONSTRAINT fk_accesorios FOREIGN KEY(ID_DISP) REFERENCES DISPOSITIVOS(ID_DISP);

INSERT INTO EMPRESA VALUES(589, 'E.A S.A.L', '48220,Poligono Astola, Vizcaya', 669546745);
INSERT INTO ONG VALUES(13783, 'SED', 681105991, 'Calle Xaudaró 25 Madrid, España', 589);
INSERT INTO DEPARTAMENTO VALUES(34, 'Departamento Recursos Humanos', 4, 140, 589);
INSERT INTO DEPARTAMENTO VALUES(65, 'Departamento Marketing', 3, 123, 589);
INSERT INTO DEPARTAMENTO VALUES(78, 'Departamento Logistica', 7, 99, 589);
INSERT INTO DEPARTAMENTO VALUES(51, 'Oficina Numero 1', 2, 75, 589);
INSERT INTO DEPARTAMENTO VALUES(83, 'Oficina Numero 2', 1, 65, 589);
INSERT INTO DEPARTAMENTO VALUES(17, 'Oficina Numero 3', 5, 23, 589);
INSERT INTO DEPARTAMENTO VALUES(47, 'Departamento Informatica', 6, 15, 589);
INSERT INTO EMPLEADOS VALUES(234, 'Adrian', 602744712, 2100, 'Ruela Antonio, 6, Bajo 8ºF,Los Sotelo del Mirador, España', 'M', 'Sanchez', 'Juanes', '1989-09-24', 34);
INSERT INTO EMPLEADOS VALUES(321, 'Marta', 627488532, 2300, 'Camino Navarrete, 06, 6º D, Paredes Baja, España', 'M', 'Gonzalez', 'German', '1990-11-10', 65);
INSERT INTO EMPLEADOS VALUES(356, 'Damian', 642812232, 1900, 'Plaza Centeno, 87, 79º E, San Moreno, España', 'H', 'Junqueras', 'Mondragon', '1989-09-26', 78);
INSERT INTO EMPLEADOS VALUES(289, 'Hector', 681826290, 2100, 'Plaza Álvaro, 10, 7º B, Hernando de las Torres, España', 'H', 'Rodriguez', 'Bisbal', '1987-10-10', 51);
INSERT INTO EMPLEADOS VALUES(443, 'David', 682140110, 1500, 'Camino Acevedo, 98, 11º E, Los Pineda, España', 'H', 'Garcia', 'Iglesias', '1991-10-20', 83);
INSERT INTO EMPLEADOS VALUES(192, 'Faisan', 675618233, 2200, 'Calle Fronton, 34, 3ºD, Amurrio, España', 'H', 'Morales', 'Garcia', '1989-09-29', 17);
INSERT INTO EMPLEADOS VALUES(538, 'Carla', 638782332, 1600, 'Andra Mari Kalea 11, 2ºA, Durango,España', 'M', 'Baute', 'Toquero', '1979-01-30', 47);
INSERT INTO DISPOSITIVOS VALUES(3644, '2022-06-23', 'Samsung');
INSERT INTO DISPOSITIVOS VALUES(5366, '2022-08-26', 'Lenovo');
INSERT INTO DISPOSITIVOS VALUES(6456, '2022-05-11', 'Samsung');
INSERT INTO DISPOSITIVOS VALUES(3456, '2022-11-14', 'MSI');
INSERT INTO DISPOSITIVOS VALUES(4321, '2022-10-20', 'Xiaomi');
INSERT INTO DISPOSITIVOS VALUES(3322, '2022-09-12', 'Asus');
INSERT INTO DISPOSITIVOS VALUES(2354, '2022-12-02', 'Acer');
INSERT INTO DISPOSITIVOS VALUES(5566, '2022-08-16', 'Nokia');
INSERT INTO DISPOSITIVOS VALUES(2987, '2022-11-27','Apple');
INSERT INTO DISPOSITIVOS VALUES(7778, '2022-09-18', 'Sony');
INSERT INTO DISPOSITIVOS VALUES(9077, '2022-03-30', 'JBL');
INSERT INTO DISPOSITIVOS VALUES(3653, '2022-02-26', 'MSI');
INSERT INTO DISPOSITIVOS VALUES(2453, '2022-08-29', 'Acer');
INSERT INTO REPARA VALUES('2022-02-12 16:34', 234, 3644);
INSERT INTO REPARA VALUES('2022-01-03 06:00', 321, 5366);
INSERT INTO REPARA VALUES('2022-06-10 16:36', 356, 3456);
INSERT INTO REPARA VALUES('2022-03-02 19:30', 289, 2354);
INSERT INTO ORDENADOR VALUES(378, 'ASUS F515JA-BQ2315W Intel Core i5-1035G1/8GB/512GB SSD', 'Asus', 'Tipo Gaming', 3322);
INSERT INTO ORDENADOR VALUES(802, 'Lenovo V15 IGL Intel Celeron N4020/8GB/256GB SSD', 'Lenovo', 'Gama baja', 5366);
INSERT INTO ORDENADOR VALUES(393, 'MSI Pulse GL76 12UGK-242ES Intel Core i7-12700H/16GB/1TB SSD', 'MSI', 'Tipo Gaming', 3456);
INSERT INTO ORDENADOR VALUES(998, 'Acer Aspire 3 A315-58-79LA Intel Core i7-1165G7/16GB/512GB SSD', 'Acer', 'Gama media', 2354);
INSERT INTO MOVIL VALUES(23, 'Samsung Galaxy M13 64GB', 'Samsung', 'Gama media', 3644);
INSERT INTO MOVIL VALUES(13, 'Nokia G60 5G', 'Nokia', 'Gama Baja', 5566);
INSERT INTO MOVIL VALUES(151, 'Samsung Galaxy M13 4/64GB Verde Libre', 'Samsung', 'Gama Media', 6456);
INSERT INTO MOVIL VALUES(121, 'iPhone XR 64GB', 'Apple', 'Gama Alta', 2987);
INSERT INTO ACCESORIOS VALUES(1245, 'TV LED 55" - Sony 55X81J, 4K HDR, X1, Google TV (Smart TV)', 'Sony', 'Gama media', 7778);
INSERT INTO ACCESORIOS VALUES(1003, 'Cascos JBL Tune 510BT', 'JBL', 'Gama media', 9077);
INSERT INTO ACCESORIOS VALUES(393, 'MSI Clutch GM08 Ratón Gaming 4200DPI', 'MSI', 'Tipo Gaming', 3653);
INSERT INTO ACCESORIOS VALUES(1093, 'Original 45W Acer KP.0450H.007 AC Adaptador Cargador', 'Acer', 'Gama media', 2453);